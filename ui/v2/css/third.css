/* 1. 브랜드 테마 및 공통 변수 (이전 단계와 100% 통일) */
:root {
    --ap-navy: #031B57;        /* 브랜드 포인트 컬러 */
    --ap-navy-light: #F0F4FF;  /* 선택 시 배경색 */
    --ap-bg-soft: #F4F6F9;     /* 전체 배경 */
    --ap-border: #E2E8F0;      /* 기본 구분선 */
    --ap-text-main: #1A202C;   /* 주요 텍스트 */
    --ap-text-sub: #718096;    /* 보조 텍스트 */
    --ap-success: #2ECC71;     /* 검증 통과(Verified) */
    --ap-danger: #E74C3C;
    --ap-accent: #FFD700;      /* 강조(골드) */
    --white: #FFFFFF;
}

/* 2. 레이아웃 및 스크롤 최적화 (뷰포트 이탈 방지) */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Pretendard', sans-serif; }

.modal-overlay {
    position: fixed; inset: 0; background: rgba(3, 27, 87, 0.6);
    backdrop-filter: blur(8px); display: flex; align-items: center; justify-content: center; padding: 20px;
    z-index: 9999;
}

.modal-container {
    background: var(--white); width: 100%; max-width: 800px; max-height: 92vh;
    border-radius: 24px; display: flex; flex-direction: column; overflow: hidden;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
}

/* 3. 고정 헤더: 프로그레스 바 (최종 3단계 활성화) */
.modal-progress { background: #F8FAFC; padding: 1.2rem 2.5rem; border-bottom: 1px solid var(--ap-border); flex-shrink: 0; }
.progress-track { display: flex; align-items: center; justify-content: space-between; }
.step { display: flex; flex-direction: column; align-items: center; gap: 6px; flex: 1; }
.circle { width: 28px; height: 28px; border-radius: 50%; background: #E2E8F0; color: #94A3B8; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.8rem; }
.circle.check { background: var(--ap-success); color: #FFF; } /* 이전 단계 완료 */
.step.active .circle { background: var(--ap-navy); color: #FFF; }
.label { font-size: 0.9rem; font-weight: 700; color: #94A3B8; }
.step.active .label { color: var(--ap-navy); }
.line { flex: 0.5; height: 2px; background: #E2E8F0; margin-top: -15px; }
.line.active { background: var(--ap-navy); opacity: 0.3; }

/* 4. 내부 스크롤 영역 */
.modal-scroll-area { padding: 1.5rem 2.5rem; overflow-y: auto; flex: 1; scroll-behavior: smooth; }
.modal-scroll-area::-webkit-scrollbar { width: 6px; }
.modal-scroll-area::-webkit-scrollbar-thumb { background: #CBD5E1; border-radius: 10px; }

.modal-intro h2 { font-size: 1.4rem; color: var(--ap-navy); font-weight: 800; }
.modal-intro p { font-size: 0.85rem; color: var(--ap-text-sub); margin: 0.5rem 0 1.5rem; }

/* 5. 선택된 후보 요약 박스 */
.section-h { font-size: 0.9rem; font-weight: 800; color: var(--ap-navy); margin-bottom: 1rem; display: flex; align-items: center; gap: 8px; }
.final-preview-card {
    background: #F8FAFC; border: 1.5px solid var(--ap-navy); border-radius: 16px;
    padding: 1.5rem; position: relative; margin: 2rem 0; 
}
.card-tag {
    position: absolute; top: -12px; left: 20px; background: var(--ap-navy);
    color: #fff; font-size: 0.65rem; font-weight: 800; padding: 4px 12px; border-radius: 20px;
}
.template-content { font-size: 0.95rem; line-height: 1.6; color: var(--ap-text-main); font-weight: 500; }
.slot-tag { background: rgba(3, 27, 87, 0.1); color: var(--ap-navy); padding: 2px 5px; border-radius: 4px; font-weight: 700; }

/* 6. 승인/반려 의사결정 섹션 */
.decision-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 2rem; }
.btn-decision {
    background: #FFF; border: 1.5px solid var(--ap-border); border-radius: 16px;
    padding: 1.2rem; cursor: pointer; display: flex; flex-direction: column;
    align-items: center; gap: 10px; transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}
.btn-decision i { font-size: 1.4rem; color: #CBD5E1; }
.btn-decision span { font-size: 0.9rem; font-weight: 700; color: var(--ap-text-sub); }

/* 호버 및 선택 상태 (기획서 [cite: 72, 74] 상태 반영) */
.btn-decision.approve:hover { border-color: var(--ap-success); background: #F0FFF4; }
.btn-decision.approve:hover i, .btn-decision.approve:hover span { color: var(--ap-success); }

.btn-decision.reject:hover { border-color: var(--ap-danger); background: #FFF5F5; }
.btn-decision.reject:hover i, .btn-decision.reject:hover span { color: var(--ap-danger); }

/* 7. 코멘트 입력 영역 */
.comment-section { background: var(--ap-navy-bg); padding: 1.2rem 0; border-radius: 16px; }
.main-textarea {
    width: 100%; height: 100px; border: 1px solid var(--ap-border); border-radius: 10px;
    padding: 1rem; font-size: 0.9rem; resize: none; background: #FFF; transition: border 0.2s;
}
.main-textarea:focus { outline: none; border-color: var(--ap-navy); }

/* 8. 고정 푸터: 저장 버튼 (index, first와 디자인 시스템 통일) */
.modal-actions {
    padding: 1.2rem 2.5rem; border-top: 1px solid var(--ap-border);
    display: flex; justify-content: space-between; align-items: center;
    background: #FFF; flex-shrink: 0;
}
.btn-cancel { border: none; background: none; color: var(--ap-text-sub); font-weight: 600; cursor: pointer; }

.btn-submit-main {
    background: var(--ap-navy); color: #FFF; border: none; border-radius: 12px;
    padding: 6px 6px 6px 20px; font-weight: 700; cursor: pointer;
    display: flex; align-items: center; gap: 15px; transition: 0.3s;
}
.btn-submit-main .btn-icon {
    background: rgba(255, 255, 255, 0.15); width: 34px; height: 34px; border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
}
.btn-submit-main:hover .btn-icon {
    background: var(--ap-accent); /* 호버 시 골드 포인트 아이콘 */
}
.btn-submit-main:hover { transform: translateY(-2px); box-shadow: 0 10px 15px rgba(3, 27, 87, 0.2); }